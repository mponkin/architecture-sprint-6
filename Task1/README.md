
# Задание 1. Проектирование технологической архитектуры 

Дано: 
* Требования к отказоустойчивости системы крайне высокие: RTO — 45 мин., RPO — 15 мин. Согласно требованиям бизнеса, доступность приложения должна быть равна 99,9%.

* Дополнительно к этому нужно обеспечить одинаковое время загрузки страниц для пользователей из разных регионов. Оно не должно зависеть от географического местоположения пользователя.

* Общий объём данных, которые хранятся в системе, равен 50 GB.

## Результирующая схема 

[InureTech_технологическая_архитектура_to-be.drawio](./InureTech_технологическая_архитектура_to-be.drawio.xml)

## 1. Стратегия масштабирования и отказоустойчивости.

Исходя из высоких требований к отказоустойчивости системы и необходимости обеспечения одинакового времени загрузки страниц для пользователей из разных регионов, в данном случае предпочтительнее развертывать приложение в нескольких географически распределенных зонах

Исходя из требований к отказоустойчивости и доступности приложения предпочтительнее выбрать горизонатальное масштабирование вместо вертикального, поскольку приложение сможет продолжить функционировать без простоев и задержек.

## 2. Приложение в нескольких зонах безопасности:

### a. Конфигурацию развёртывания приложения в Kubernetes. 

В данном случае предпочтительнее использовать 
независимые кластеры в каждой зоне вместо единого кластера. Этот подход изолирует сбои и снизит зависимость от сетевой связанности между различными датацентрами в разных географических зонах и от внутренних недостатков фейловер-механизмов в Kubernetes, что особенно актуально для ситуаций, когда площадки располагаются далеко

### b. Балансировка нагрузки
В рамках нескольких географических зон необходимо использовать GSLB (Global Server Load Balancer)

В рамках отдельного кластера балансировка может осуществляться средствами Kubernetes 	

### c. Фейловер-стратегия 

Исходя из повышенных требований к доступности и отказоустойчивости системы, предпочтительнее использовать стретегию Active-Active

### d. Конфигурация базы данных
 
Можно использовать Patroni для управления кластером PostgreSQL с следующем типом репликации multi-master на различные зоны в рамках каждой зоны использовать тип репликаии master-slave. Это позволит:
* В случае сбоя одного главного узла обеспечить неприрывную работу приложения с помощью другого главного узла
* Снизить вероятность сбоя всех главных узлов, поскольку узлы находятся в разных местах.
* Приложению не направлять трафик только на один главный узел
* Распределить read/write операций внутри зон, так и между ними.

В рамках текущей конфигурации необходимо также производить регулярные резервные копии с использованием, например встроинного в PostgreSQL инструмента pgBackRest

### f. Шардирование 
На текущий момент объем данных не больше 50 GB, поэтому в текущей реализации не особо имеет смысл применять шардирование, однако потенциально в будущем может потребовать реализация шардированния